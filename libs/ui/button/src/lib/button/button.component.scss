:root {
  // Theme styles
  // DEFAULT
  --tsb-theme-default-backgroundColor: var(--ts-color-primary-500);
  --tsb-theme-default-backgroundColor-hover: var(--ts-color-primary-700);
  --tsb-theme-default-backgroundColor-active: var(--ts-color-primary-900);
  --tsb-theme-default-backgroundColor-focus: var(--ts-color-primary-500);
  --tsb-theme-default-backgroundColor-disabled: var(--ts-color-utility-300);
  --tsb-theme-default-borderColor: var(--ts-color-primary-500);
  --tsb-theme-default-borderColor-hover: var(--ts-color-primary-700);
  --tsb-theme-default-borderColor-active: var(--ts-color-primary-900);
  --tsb-theme-default-borderColor-focus: var(--ts-color-primary-500);
  --tsb-theme-default-borderColor-disabled: var(--ts-color-utility-300);
  --tsb-theme-default-color: var(--ts-color-light);
  --tsb-theme-default-color-active: var(--ts-color-light);
  --tsb-theme-default-color-focus: var(--ts-color-light);
  --tsb-theme-default-boxShadow-color-focus: var(--ts-color-primary-300);
  // SECONDARY
  --tsb-theme-secondary-backgroundColor: var(--ts-color-light);
  --tsb-theme-secondary-backgroundColor-hover: var(--ts-color-primary-100);
  --tsb-theme-secondary-backgroundColor-active: var(--ts-color-primary-300);
  --tsb-theme-secondary-backgroundColor-focus: var(--ts-color-light);
  --tsb-theme-secondary-backgroundColor-disabled: var(--ts-color-light);
  --tsb-theme-secondary-borderColor: var(--ts-color-utility-300);
  --tsb-theme-secondary-borderColor-hover: var(--ts-color-utility-500);
  --tsb-theme-secondary-borderColor-active: var(--ts-color-utility-600);
  --tsb-theme-secondary-borderColor-focus: var(--ts-color-utility-400);
  --tsb-theme-secondary-borderColor-disabled: var(--ts-color-utility-200);
  --tsb-theme-secondary-color: var(--ts-color-primary-500);
  --tsb-theme-secondary-color-active: var(--ts-color-primary-500);
  --tsb-theme-secondary-color-focus: var(--ts-color-primary-500);
  --tsb-theme-secondary-boxShadow-color-focus: var(--ts-color-primary-300);
  // WARNING
  --tsb-theme-warning-backgroundColor: var(--ts-color-light);
  --tsb-theme-warning-backgroundColor-hover: var(--ts-color-warn-100);
  --tsb-theme-warning-backgroundColor-active: var(--ts-color-warn-300);
  --tsb-theme-warning-backgroundColor-focus: var(--ts-color-light);
  --tsb-theme-warning-backgroundColor-disabled: var(--ts-color-light);
  --tsb-theme-warning-borderColor: var(--ts-color-utility-300);
  --tsb-theme-warning-borderColor-hover: var(--ts-color-utility-500);
  --tsb-theme-warning-borderColor-active: var(--ts-color-utility-600);
  --tsb-theme-warning-borderColor-focus: var(--ts-color-utility-400);
  --tsb-theme-warning-borderColor-disabled: var(--ts-color-utility-200);
  --tsb-theme-warning-color: var(--ts-color-warn-500);
  --tsb-theme-warning-color-active: var(--ts-color-warn-500);
  --tsb-theme-warning-color-focus: var(--ts-color-warn-500);
  --tsb-theme-warning-boxShadow-color-focus: var(--ts-color-warn-300);
  // ALTERNATE-PRIMARY
  $green-500: #2d8734;
  $green-300: lighten($green-500, 8);
  $green-700: darken($green-500, 8);
  $green-900: darken($green-500, 16);
  --tsb-theme-alternate-primary-backgroundColor: #{$green-500};
  --tsb-theme-alternate-primary-backgroundColor-hover: #{$green-700};
  --tsb-theme-alternate-primary-backgroundColor-active: #{$green-900};
  --tsb-theme-alternate-primary-backgroundColor-focus: #{$green-500};
  --tsb-theme-alternate-primary-backgroundColor-disabled: var(--ts-color-utility-300);
  --tsb-theme-alternate-primary-borderColor: #2d8734;
  --tsb-theme-alternate-primary-borderColor-hover: #{$green-700};
  --tsb-theme-alternate-primary-borderColor-active: #{$green-900};
  --tsb-theme-alternate-primary-borderColor-focus: #{$green-500};
  --tsb-theme-alternate-primary-borderColor-disabled: var(--ts-color-utility-300);
  --tsb-theme-alternate-primary-color: var(--ts-color-light);
  --tsb-theme-alternate-primary-color-active: var(--ts-color-light);
  --tsb-theme-alternate-primary-color-focus: var(--ts-color-light);
  --tsb-theme-alternate-primary-boxShadow-color-focus: #{$green-300};

  // Variables to overwrite with theme values
  --tsb-color: var(--ts-color-light);
  --tsb-color-disabled: var(--ts-color-utility-600);
  --tsb-backgroundColor: var(--ts-color-primary-500);
  --tsb-borderColor: var(--ts-color-primary-500);
  --tsb-boxShadow-color: var(--ts-color-primary-300);

  --tsb-typography: var(--ts-typography-compound-body2);
  --tsb-fontSize: 14px;
  --tsb-lineHeight: 35px;
  --tsb-rotation: 180deg;
  --tsb-icon-negative-padding-adjustment: -4px;
  --tsb-collapsible-first-icon-adjustment: -.15em;
  // NOTE: This is to better align with inputs that have extra space above and below
  --tsb-margin: 4px 0;
  --tsb-padding-base: var(--ts-space-inset-400);
  --tsb-padding: 0 var(--tsb-padding-base);
  --tsb-padding-collapsed: 0 6px;
  --tsb-borderRadius: var(--ts-border-radius-base);
  --tsb-borderRadius-collapsible: 2em;
  --tsb-padding-right-progress: 44px;
  --tsb-icon-vertical-adjustment: -.15em;
  --tsb-icon-horizontal-adjustment: .2em;
  --tsb-icon-padding: 0 .2em;
  --tsb-shadow-focus: 0 0 2px 2px var(--tsb-boxShadow-color);
  --tsb-content-maxWidth: 400px;
  --tsb-spinner-color: var(--ts-color-utility-500);
  --tsb-animationEasing: var(--ts-animation-easing-ease);
  --tsb-content-transitionDuration: var(--ts-animation-time-duration-400);
  --tsb-spinner-transition: opacity calc(var(--tsb-content-transitionDuration) - 200ms) var(--tsb-animationEasing);
  --tsb-spinner-xy: 21px;
  --tsb-button-transitionDuration: var(--ts-animation-time-duration-200);
}

// Spinner animations and values
$offset: 187;
$duration: 1.4s;
@keyframes rotation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(270deg);
  }
}
@keyframes dash {
  0% {
    stroke-dashoffset: $offset;
  }
  50% {
    stroke-dashoffset: $offset / 4;
    transform: rotate(135deg);
  }
  100% {
    stroke-dashoffset: $offset;
    transform: rotate(450deg);
  }
}

.ts-button {
  display: inline-block;
  margin: var(--tsb-margin);

  // Top level styles should be nested here
  .c-button {
    background-color: var(--tsb-backgroundColor);
    border: 1px solid var(--tsb-borderColor);
    border-radius: var(--tsb-borderRadius);
    color: var(--tsb-color);
    cursor: pointer;
    font: var(--tsb-typography);
    font-size: var(--tsb-fontSize);
    line-height: var(--tsb-lineHeight);
    padding: var(--tsb-padding);
    position: relative;
    transition-duration: var(--tsb-button-transitionDuration);
    transition-property: color, box-shadow, border-color, background-color;
    transition-timing-function: var(--tsb-animationEasing);

    &[disabled] {
      --tsb-borderColor: var(--tsb-theme-default-borderColor-disabled);
      --tsb-color: var(--tsb-color-disabled);
      cursor: not-allowed;
    }

    &:focus {
      box-shadow: var(--tsb-shadow-focus);
      outline: none;
    }

    $themes: default secondary warning alternate-primary;
    @each $theme in $themes {
      &--#{$theme} {
        --tsb-boxShadow-color: var(--tsb-theme-#{$theme}-boxShadow-color-focus);
        --tsb-color: var(--tsb-theme-#{$theme}-color);
        --tsb-backgroundColor: var(--tsb-theme-#{$theme}-backgroundColor);
        --tsb-borderColor: var(--tsb-theme-#{$theme}-borderColor);

        &[disabled] {
          --tsb-backgroundColor: var(--tsb-theme-#{$theme}-backgroundColor-disabled);
          --tsb-borderColor: var(--tsb-theme-#{$theme}-borderColor-disabled);
        }

        &:not([disabled]) {
          &:hover {
            --tsb-backgroundColor: var(--tsb-theme-#{$theme}-backgroundColor-hover);
            --tsb-borderColor: var(--tsb-theme-#{$theme}-borderColor-hover);
          }

          &:focus {
            --tsb-boxShadow-color: var(--tsb-theme-#{$theme}-boxShadow-color-focus);
            // stylelint-disable-next-line declaration-no-important
            --tsb-borderColor: var(--tsb-theme-#{$theme}-borderColor-focus) !important;

            &:hover {
              --tsb-borderColor: var(--tsb-theme-#{$theme}-backgroundColor-hover);
            }
          }

          &:active {
            --tsb-backgroundColor: var(--tsb-theme-#{$theme}-backgroundColor-active);
            --tsb-borderColor: var(--tsb-theme-#{$theme}-borderColor-active);
          }
        }
      }
    }

    // Target the prefix icon
    &__icon {
      display: inline-block;
      margin-right: var(--tsb-icon-horizontal-adjustment);
    }

    &__content {
      // If nothing is passed to <ng-content>, we fall back to the @Input value
      .c-button__content-ng-content {
        &:not(:empty) {
          + .c-button__content-input {
            display: none;
          }
        }
      }
    }

    .c-button__spinner {
      display: block;
      height: var(--tsb-spinner-xy);
      opacity: 0;
      position: absolute;
      right: var(--tsb-padding-base);
      top: 50%;
      transform: translateY(calc(-50% - 2px));
      transition: var(--tsb-spinner-transition);
      width: var(--tsb-spinner-xy);

      &--active {
        opacity: 1;
      }

      svg {
        animation: rotation $duration linear infinite;
        transform-origin: center;
      }

      circle {
        animation: dash $duration ease-in-out infinite;
        stroke: var(--tsb-spinner-color);
        stroke-dasharray: $offset;
        stroke-dashoffset: 0;
        transform-origin: center;
      }
    }

    &--progress {
      padding-right: var(--tsb-padding-right-progress);
    }

    &--small {
      font-size: 13px;
      line-height: 14px;
      padding: 4px 8px;

      .fa,
      .fas {
        transform: scale(.84);
      }
    }
  }
}
